pipeline {
    agent any

    stages {
        stage('Start Docker Container') {
            steps {
                script {
                    sh "echo aaa"
                    docker.
                }
            }
        }

        stage('Execute Commands in Container') {
            steps {
                script {
                    sh "echo bbb"
                }
            }
        }

        stage('Build') {
            steps {
                    sh "echo ccc"
            }
        }

        stage('Cleanup') {
            steps {
                    sh "echo ddd"
            }
        }
    }
}


pipeline {
    agent {
        docker { image 'node:20.18.0-alpine3.20' }
    }
    stages {
        stage('Test') {
            steps {
                sh 'node --version'
                sh 'ls -la'
                sh 'echo Region is $Region'
                sh 'echo Option is $Option'
                sh 'echo Revision is $Revision'
                sh 'id'
            }
        }
    }
}

pipeline {
    agent any // または agent label 'my-label' など
    stages {
        stage('Build') {
            steps {
                sh 'ls -la'
                sh 'pwd'
                script {
                    docker.image('busybox').inside {
                        sh 'ls -la'
                        sh 'pwd'
                        sh 'du -h -d 2 /'
                    }
                }
            }
        }
    }
}


pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                script {
                    sh 'echo outside1!!!'
                    sh 'ls -la' 
                    def docker_image = docker.image('busybox').Run
                    docker_image.inside {
                        sh 'echo inside2!!!'
                        sh 'ls -la'
                        sh 'pwd'
                    }
                    sh 'echo outside3!!!'
                    sh 'ls -la'
                    docker_image.inside {
                        sh 'echo inside4!!!'
                        sh 'ls -la'
                        sh 'pwd'
                    }
                }
            }
        }
    }
}



